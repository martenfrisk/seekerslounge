{"version":3,"sources":["components/transcribe/select-stt-json-type.jsx","components/transcribe/select-export-format.jsx","assets/transcribeDemo/mini-52-edit.mp3","components/Transcribe.jsx","components/transcribe/local-storage.jsx"],"names":["SttTypeSelect","props","className","name","value","onChange","handleChange","disabled","ExportFormatSelect","Transcribe","loadDemo","setState","transcriptData","DEMO_TRANSCRIPT","mediaUrl","DEMO_MEDIA_URL","title","sttType","handleLoadMedia","files","file","document","createElement","canPlayType","type","fileURL","URL","createObjectURL","fileName","alert","handleLoadMediaUrl","prompt","handleLoadTranscriptURL","toLowerCase","fetch","then","res","json","data","handleLoadTranscriptList","event","target","JSON","parse","handleLoadTranscriptJson","fileReader","FileReader","onload","result","readAsText","handleIsTextEditable","e","isTextEditable","checked","handleSpellCheck","spellCheck","handleTranscriptLoad","console","log","transcriptLoad","state","handleSttTypeChange","handleExportFormatChange","exportTranscript","transcriptEditorRef","current","getEditorContent","exportFormat","ext","tmpData","stringify","download","content","filename","contentType","link","blob","Blob","href","window","body","appendChild","click","removeChild","clearLocalStorage","localStorage","clear","info","handleAnalyticsEvents","analyticsEvents","handleChangeTranscriptTitle","newTitle","handleChangeTranscriptName","handleAutoSaveChanges","newAutoSaveData","autoSaveData","autoSaveExtension","mediaUrlName","includes","setItem","localSave","autoSaveContentType","React","createRef","rel","onClick","htmlFor","id","this","isEditable","sttJsonType","ref","mediaType","style","height","width","float","Component"],"mappings":"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","file":"static/js/5.d5f492c8.chunk.js","sourcesContent":["import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst SttTypeSelect = props => {\r\n  return <select className={ props.className } name={ props.name } value={ props.value } onChange={ props.handleChange }>\r\n    <option value=\"amazontranscribe\">Amazon Transcribe</option>\r\n    <option value=\"bbckaldi\">BBC Kaldi</option>\r\n    <option value=\"draftjs\">Draft Js</option>\r\n    <option value=\"gentle-transcript\" disabled>Gentle Transcript</option>\r\n    <option value=\"gentle-alignement\" disabled>Gentle Alignement</option>\r\n    <option value=\"autoedit2\">autoEdit 2</option>\r\n    <option value=\"speechmatics\">Speechmatics</option>\r\n    <option value=\"ibm\">IBM Watson STT</option>\r\n    <option value=\"digitalpaperedit\">Digital Paper Edit</option>\r\n    <option value=\"google-stt\">Google STT</option>\r\n  </select>;\r\n};\r\n\r\nSttTypeSelect.propTypes = {\r\n  className: PropTypes.string,\r\n  name: PropTypes.string,\r\n  value: PropTypes.string,\r\n  handleChange: PropTypes.func\r\n};\r\n\r\nexport default SttTypeSelect;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst ExportFormatSelect = props => {\r\n  return <select className={ props.className } name={ props.name } value={ props.value } onChange={ props.handleChange }>\r\n    <option value=\"txtspeakertimecodes\">Text file - with Speakers and Timecodes</option>\r\n    <option value=\"draftjs\">Draft Js</option>\r\n    <option value=\"txt\">Text file</option>\r\n    <option value=\"digitalpaperedit\">Digital Paper Edit</option>\r\n    <option value=\"srt\">Srt - Captions</option>\r\n    <option value=\"ttml\">TTML - Captions</option>\r\n    <option value=\"premiereTTML\">TTML for Adobe Premiere - Captions</option>\r\n    <option value=\"itt\">iTT - Captions</option>\r\n    <option value=\"csv\">CSV - Captions</option>\r\n    <option value=\"vtt\">VTT - Captions</option>\r\n    <option value=\"pre-segment-txt\">Pre-segment-txt - Captions</option>\r\n    <option value=\"docx\">MS Word</option>\r\n    <option value=\"json-captions\">Json - Captions</option>\r\n  </select>;\r\n};\r\n\r\nExportFormatSelect.propTypes = {\r\n  className: PropTypes.string,\r\n  name: PropTypes.string,\r\n  value: PropTypes.string,\r\n  handleChange: PropTypes.func\r\n};\r\n\r\nexport default ExportFormatSelect;","export default __webpack_public_path__ + \"static/media/mini-52-edit.9bf18c37.mp3\";","import React from 'react'\r\nimport TranscriptEditor from '@bbc/react-transcript-editor'\r\nimport SttTypeSelect from './transcribe/select-stt-json-type'\r\nimport ExportFormatSelect from './transcribe/select-export-format'\r\nimport {\r\n\t// loadLocalSavedData,\r\n\t// isPresentInLocalStorage,\r\n\tlocalSave\r\n} from './transcribe/local-storage'\r\nimport DEMO_TRANSCRIPT from '../assets/transcribeDemo/mini-52.json'\r\nimport DEMO_MEDIA_URL from '../assets/transcribeDemo/mini-52-edit.mp3'\r\n\r\n\r\nconst DEMO_TITLE = 'Mini-52 - Post-game Conference Pt. 2'\r\n\r\nclass Transcribe extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props)\r\n\r\n\t\tthis.state = {\r\n\t\t\ttranscriptData: null,\r\n\t\t\tmediaUrl: null,\r\n\t\t\tisTextEditable: true,\r\n\t\t\tspellCheck: false,\r\n\t\t\tsttType: 'amazontranscribe',\r\n\t\t\tanalyticsEvents: [],\r\n\t\t\ttitle: '',\r\n\t\t\tfileName: '',\r\n\t\t\tautoSaveData: {},\r\n\t\t\tautoSaveContentType: 'amazontranscribe',\r\n\t\t\tautoSaveExtension: 'json',\r\n\t\t\ttranscriptLoad: {}\r\n\t\t}\r\n\r\n\t\tthis.transcriptEditorRef = React.createRef()\r\n\t}\r\n\r\n\tloadDemo = () => {\r\n\t\t// if (isPresentInLocalStorage(DEMO_MEDIA_URL)) {\r\n\t\t// \tconst transcriptDataFromLocalStorage = loadLocalSavedData(DEMO_MEDIA_URL)\r\n\t\t// \tthis.setState({\r\n\t\t// \t\ttranscriptData: transcriptDataFromLocalStorage,\r\n\t\t// \t\tmediaUrl: DEMO_MEDIA_URL,\r\n\t\t// \t\ttitle: DEMO_TITLE,\r\n\t\t// \t\tsttType: 'amazontranscribe'\r\n\t\t// \t})\r\n\t\t// } else {\r\n\t\tthis.setState({\r\n\t\t\ttranscriptData: DEMO_TRANSCRIPT,\r\n\t\t\tmediaUrl: DEMO_MEDIA_URL,\r\n\t\t\ttitle: DEMO_TITLE,\r\n\t\t\tsttType: 'amazontranscribe'\r\n\t\t})\r\n\t\t// }\r\n\t}\r\n\r\n\t// https://stackoverflow.com/questions/8885701/play-local-hard-drive-video-file-with-html5-video-tag\r\n\thandleLoadMedia = (files) => {\r\n\t\tconst file = files[0]\r\n\t\tconst videoNode = document.createElement('video')\r\n\t\tconst canPlay = videoNode.canPlayType(file.type)\r\n\r\n\t\tif (canPlay) {\r\n\t\t\tconst fileURL = URL.createObjectURL(file)\r\n\t\t\tthis.setState({\r\n\t\t\t\t// transcriptData: DEMO_TRANSCRIPT,\r\n\t\t\t\tmediaUrl: fileURL,\r\n\t\t\t\tfileName: file.name\r\n\t\t\t})\r\n\t\t} else {\r\n\t\t\talert('Select a valid audio or video file.')\r\n\t\t}\r\n\t}\r\n\r\n\thandleLoadMediaUrl = () => {\r\n\t\tconst fileURL = prompt(\"Paste the URL you'd like to use here:\")\r\n    \r\n\t\tthis.setState({\r\n      // transcriptData: DEMO_TRANSCRIPT,\r\n\t\t\tmediaUrl: fileURL\r\n\t\t})\r\n\t}\r\n  \r\n\thandleLoadTranscriptURL = () => {\r\n    const fileURL = prompt(\"Enter filename followed by .json (i.e. s01e02.json)\")\r\n    const file = \"https://raw.githubusercontent.com/martenfrisk/seekersresources/master/\" + fileURL.toLowerCase() + \".json\"\r\n    fetch(file)\r\n      .then(res => res.json())\r\n      .then(data => this.setState({ transcriptData: data }))\r\n\r\n    // this.setState({\r\n    //   transcriptData: fileURL\r\n    // })\r\n\t\t// if (fileURL.type === 'application/json') {\r\n\t\t// \tconst fileReader = new FileReader()\r\n\r\n\t\t// \tfileReader.onload = (event) => {\r\n\t\t// \t\tthis.setState({\r\n\t\t// \t\t\ttranscriptData: JSON.parse(event.target.result)\r\n\t\t// \t\t})\r\n\t\t// \t}\r\n\r\n\t\t// \tfileReader.readAsText(fileURL)\r\n\t\t// } else {\r\n\t\t// \talert('Select a valid JSON file.')\r\n\t\t// }\r\n\t}\r\n\thandleLoadTranscriptList = (event) => {\r\n    let file = event.target.value\r\n    // fetch(file)\r\n    //   .then(res => res.json())\r\n    //   .then(data => this.setState({ transcriptData: data }))\r\n      this.setState({\r\n        transcriptData: JSON.parse(file)\r\n      })\r\n\r\n\t}\r\n\thandleLoadTranscriptJson = (files) => {\r\n\t\tconst file = files[0]\r\n\r\n\t\tif (file.type === 'application/json') {\r\n\t\t\tconst fileReader = new FileReader()\r\n\r\n\t\t\tfileReader.onload = (event) => {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\ttranscriptData: JSON.parse(event.target.result)\r\n\t\t\t\t})\r\n\t\t\t}\r\n\r\n\t\t\tfileReader.readAsText(file)\r\n\t\t} else {\r\n\t\t\talert('Select a valid JSON file.')\r\n\t\t}\r\n\t}\r\n\r\n\thandleIsTextEditable = (e) => {\r\n\t\tthis.setState({\r\n\t\t\tisTextEditable: e.target.checked\r\n\t\t})\r\n\t}\r\n\r\n\thandleSpellCheck = (e) => {\r\n\t\tthis.setState({\r\n\t\t\tspellCheck: e.target.checked\r\n\t\t})\r\n\t}\r\n\r\n\thandleTranscriptLoad = (event) => {\r\n\t\tconsole.log(event)\r\n\t\tthis.setState({\r\n\t\t\ttranscriptLoad: event.target.value\r\n\t\t})\r\n\t\tconsole.log(this.state.transcriptLoad)\r\n\t}\r\n\r\n\t// https://stackoverflow.com/questions/21733847/react-jsx-selecting-selected-on-selected-select-option\r\n\thandleSttTypeChange = (event) => {\r\n\t\tthis.setState({ [event.target.name]: event.target.value })\r\n\t}\r\n\r\n\thandleExportFormatChange = (event) => {\r\n\t\tconsole.log(event.target.name, event.target.value)\r\n\t\tthis.setState({ [event.target.name]: event.target.value })\r\n\t}\r\n\r\n\texportTranscript = () => {\r\n\t\t// console.log('export')\r\n\t\t// eslint-disable-next-line react/no-string-refs\r\n\t\tconst { data, ext } = this.transcriptEditorRef.current.getEditorContent(this.state.exportFormat)\r\n\t\tlet tmpData = data\r\n\t\tif (ext === 'json') {\r\n\t\t\ttmpData = JSON.stringify(data, null, 2)\r\n\t\t}\r\n\t\tif (ext !== 'docx') {\r\n\t\t\tthis.download(tmpData, `${this.state.mediaUrl}.${ext}`)\r\n\t\t}\r\n\t}\r\n\r\n\t// https://stackoverflow.com/questions/2897619/using-html5-javascript-to-generate-and-save-a-file\r\n\tdownload = (content, filename, contentType) => {\r\n\t\tconsole.log('download')\r\n\t\tconst type = contentType || 'application/octet-stream'\r\n\t\tconst link = document.createElement('a')\r\n\t\tconst blob = new Blob([ content ], { type: type })\r\n\r\n\t\tlink.href = window.URL.createObjectURL(blob)\r\n\t\tlink.download = filename\r\n\t\t// Firefox fix - cannot do link.click() if it's not attached to DOM in firefox\r\n\t\t// https://stackoverflow.com/questions/32225904/programmatical-click-on-a-tag-not-working-in-firefox\r\n\t\tdocument.body.appendChild(link)\r\n\t\tlink.click()\r\n\t\tdocument.body.removeChild(link)\r\n\t}\r\n\r\n\tclearLocalStorage = () => {\r\n\t\tlocalStorage.clear()\r\n\t\tconsole.info('Cleared local storage.')\r\n\t}\r\n\r\n\thandleAnalyticsEvents = (event) => {\r\n\t\tthis.setState({ analyticsEvents: [ ...this.state.analyticsEvents, event ] })\r\n\t}\r\n\r\n\thandleChangeTranscriptTitle = (newTitle) => {\r\n\t\tthis.setState({\r\n\t\t\ttitle: newTitle\r\n\t\t})\r\n\t}\r\n\r\n\thandleChangeTranscriptName = (value) => {\r\n\t\tthis.setState({ fileName: value })\r\n\t}\r\n\r\n\thandleAutoSaveChanges = (newAutoSaveData) => {\r\n\t\t// console.log('handleAutoSaveChanges', newAutoSaveData)\r\n\t\tconst { data, ext } = newAutoSaveData\r\n\t\tthis.setState({ autoSaveData: data, autoSaveExtension: ext })\r\n\t\t// Saving to local storage\r\n\t\tlocalSave(this.state.mediaUrl, this.state.fileName, data)\r\n\t}\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"px-2\">\r\n\t\t\t\t<div className=\"w-full text-2xl text-center\">Transcript Editor</div>\r\n\t\t\t\t<div className=\"w-full px-10 my-2 border-t border-b border-l-4 border-r border-red-700\">\r\n\t\t\t\t\t<p>\r\n\t\t\t\t\t\tThis is an experimental transcript editor. Code is copied from the demo of{' '}\r\n\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\thref=\"https://github.com/bbc/react-transcript-editor\"\r\n\t\t\t\t\t\t\ttarget=\"_blank\"\r\n\t\t\t\t\t\t\trel=\"noopener noreferrer\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tBBC react-transcript-editor\r\n\t\t\t\t\t\t</a>. Only tested with AWS Transcribe transcript files.\r\n\t\t\t\t\t</p>\r\n\t\t\t\t\t<p>\r\n\t\t\t\t\t\tDue to copyright reasons I have not included any audio files. You'll have to provide these\r\n\t\t\t\t\t\tyourself. I'd suggest using the Stitcher RSS feeds and grabbing the URLs directly from the RSS.\r\n\t\t\t\t\t</p>\r\n          <p>\r\n            Prefered export format is 'Text file - with Speakers and Timecode'.\r\n          </p>\r\n\t\t\t\t</div>\r\n\t\t\t\t<button onClick={() => this.loadDemo()} className=\"underline\">\r\n\t\t\t\t\tLoad Demo (might take a few seconds to load)\r\n\t\t\t\t</button>\r\n\t\t\t\t<div className=\"flex flex-wrap px-12 py-4\">\r\n\t\t\t\t\t<section className=\"flex flex-wrap w-1/2 pl-4 mb-4 border-l-8 border-blue-600\">\r\n\t\t\t\t\t\t<div className=\"w-full text-xl\">Load Audio</div>\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tonClick={() => this.handleLoadMediaUrl()}\r\n\t\t\t\t\t\t\tclassName=\"w-full pl-4 mb-1 text-left underline\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tFrom URL (click me)\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t<label className=\"pl-4 mb-1 mr-4\" htmlFor=\"mediaFile\">\r\n\t\t\t\t\t\t\tFrom Computer\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t<input type={'file'} id={'mediaFile'} onChange={(e) => this.handleLoadMedia(e.target.files)} />\r\n\t\t\t\t\t\t{this.state.fileName !== '' ? <label>{this.state.fileName}</label> : null}\r\n\t\t\t\t\t</section>\r\n\r\n\t\t\t\t\t<section className=\"flex flex-wrap w-1/2 pl-4 mb-4 border-l-8 border-blue-600\">\r\n\t\t\t\t\t\t<div className=\"w-full text-xl\">Load Transcript</div>\r\n\t\t\t\t\t\t<div className=\"w-full pl-4 mb-1\">Input format\r\n\t\t\t\t\t\t<SttTypeSelect\r\n\t\t\t\t\t\t\tclassName=\"w-1/2 ml-4 border border-gray-500\"\r\n\t\t\t\t\t\t\tname={'sttType'}\r\n\t\t\t\t\t\t\tvalue={this.state.sttType}\r\n\t\t\t\t\t\t\thandleChange={this.handleSttTypeChange}\r\n\t\t\t\t\t\t/>\r\n            </div>\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tonClick={() => this.handleLoadTranscriptURL()}\r\n\t\t\t\t\t\t\tclassName=\"w-full pl-4 mb-1 text-left underline\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tEnter episode name (click me)\r\n\t\t\t\t\t\t</button>\r\n            {/* <ImportScripts\r\n              className=\"w-1/2 border border-gray-500\"\r\n\t\t\t\t\t\t\tname={'importScripts'}\r\n\t\t\t\t\t\t\tvalue={this.state.transcriptData}\r\n\t\t\t\t\t\t\thandleChange={this.handleLoadTranscriptList}\r\n              /> */}\r\n\t\t\t\t\t\t<label className=\"pl-4 mb-1 mr-4\" htmlFor=\"transcriptFile\">\r\n\t\t\t\t\t\t\tFrom Computer\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype={'file'}\r\n\t\t\t\t\t\t\tid={'transcriptFile'}\r\n\t\t\t\t\t\t\tonChange={(e) => this.handleLoadTranscriptJson(e.target.files)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t{this.state.transcriptData !== null ? <label>Transcript loaded.</label> : null}\r\n\t\t\t\t\t</section>\r\n\r\n\t\t\t\t\t<section className=\"flex flex-wrap w-1/2 pl-4 mb-4 border-l-8 border-blue-400\">\r\n\t\t\t\t\t\t<label className=\"w-full\">Export Transcript</label>\r\n\t\t\t\t\t\t<ExportFormatSelect\r\n\t\t\t\t\t\t\tclassName=\"w-1/2 mr-2 border border-gray-500\"\r\n\t\t\t\t\t\t\tname={'exportFormat'}\r\n\t\t\t\t\t\t\tvalue={this.state.exportFormat}\r\n\t\t\t\t\t\t\thandleChange={this.handleExportFormatChange}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t{this.state.transcriptData !== null ? (\r\n\t\t\t\t\t\t\t<button onClick={() => this.exportTranscript()} className=\"underline\">\r\n\t\t\t\t\t\t\t\tExport File\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<div>Nothing to export</div>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</section>\r\n\r\n\t\t\t\t\t<section className=\"flex flex-wrap w-1/2 pl-4 mb-4 border-l-8 border-blue-400\">\r\n\t\t\t\t\t\t<label className=\"mr-2\">Transcript Title (Optional)</label>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\tclassName=\"p-1 border border-gray-500\"\r\n\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\tvalue={this.state.title}\r\n\t\t\t\t\t\t\tonChange={(e) => this.handleChangeTranscriptTitle(e.target.value)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</section>\r\n\r\n\t\t\t\t\t<section className=\"flex flex-wrap px-4 border-l-8 border-blue-200\">\r\n\t\t\t\t\t\t<label className=\"w-full text-xl\">Options</label>\r\n\r\n\t\t\t\t\t\t<div className=\"mr-4\">\r\n\t\t\t\t\t\t\t<label className=\"mr-2\" htmlFor={'textIsEditableCheckbox'}>\r\n\t\t\t\t\t\t\t\tText Is Editable\r\n\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\tid={'textIsEditableCheckbox'}\r\n\t\t\t\t\t\t\t\ttype=\"checkbox\"\r\n\t\t\t\t\t\t\t\tchecked={this.state.isTextEditable}\r\n\t\t\t\t\t\t\t\tonChange={this.handleIsTextEditable}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<div className=\"mr-4\">\r\n\t\t\t\t\t\t\t<label className=\"mr-2\" htmlFor={'spellCheckCheckbox'}>\r\n\t\t\t\t\t\t\t\tSpell Check\r\n\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\tid={'spellCheckCheckbox'}\r\n\t\t\t\t\t\t\t\ttype=\"checkbox\"\r\n\t\t\t\t\t\t\t\tchecked={this.state.spellCheck}\r\n\t\t\t\t\t\t\t\tonChange={this.handleSpellCheck}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<button onClick={() => this.clearLocalStorage()}>Clear Local Storage</button>\r\n\t\t\t\t\t</section>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<TranscriptEditor\r\n\t\t\t\t\ttranscriptData={this.state.transcriptData}\r\n\t\t\t\t\tfileName={this.state.fileName}\r\n\t\t\t\t\tmediaUrl={this.state.mediaUrl}\r\n\t\t\t\t\tisEditable={this.state.isTextEditable}\r\n\t\t\t\t\tspellCheck={this.state.spellCheck}\r\n\t\t\t\t\tsttJsonType={this.state.sttType}\r\n\t\t\t\t\thandleAnalyticsEvents={this.handleAnalyticsEvents}\r\n\t\t\t\t\ttitle={this.state.title}\r\n\t\t\t\t\tref={this.transcriptEditorRef}\r\n\t\t\t\t\thandleAutoSaveChanges={this.handleAutoSaveChanges}\r\n\t\t\t\t\tautoSaveContentType={this.state.autoSaveContentType}\r\n\t\t\t\t\tmediaType={'audio'}\r\n\t\t\t\t/>\r\n\r\n\t\t\t\t<section style={{ height: '250px', width: '50%', float: 'left' }}>\r\n\t\t\t\t\t<h3>Components Analytics</h3>\r\n\t\t\t\t\t<textarea\r\n\t\t\t\t\t\tstyle={{ height: '100%', width: '100%' }}\r\n\t\t\t\t\t\tvalue={JSON.stringify(this.state.analyticsEvents, null, 2)}\r\n\t\t\t\t\t\tdisabled\r\n\t\t\t\t\t/>\r\n\t\t\t\t</section>\r\n\r\n\t\t\t\t<section style={{ height: '250px', width: '50%', float: 'right' }}>\r\n\t\t\t\t\t<h3>\r\n\t\t\t\t\t\tAuto Save data:{' '}\r\n\t\t\t\t\t\t<code>\r\n\t\t\t\t\t\t\t{this.state.autoSaveContentType}| {this.state.autoSaveExtension}\r\n\t\t\t\t\t\t</code>\r\n\t\t\t\t\t</h3>\r\n\t\t\t\t\t<textarea\r\n\t\t\t\t\t\tstyle={{ height: '100%', width: '100%' }}\r\n\t\t\t\t\t\tvalue={\r\n\t\t\t\t\t\t\tthis.state.autoSaveExtension === 'json' ? (\r\n\t\t\t\t\t\t\t\tJSON.stringify(this.state.autoSaveData, null, 2)\r\n\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\tthis.state.autoSaveData\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tdisabled\r\n\t\t\t\t\t/>\r\n\t\t\t\t</section>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\nexport default Transcribe\r\n","const localSave = (mediaUrl, fileName, data) => {\r\n  let mediaUrlName = mediaUrl;\r\n  // if using local media instead of using random blob name\r\n  // that makes it impossible to retrieve from on page refresh\r\n  // use file name\r\n  if (mediaUrlName.includes('blob')) {\r\n    mediaUrlName = fileName;\r\n  }\r\n\r\n  localStorage.setItem(`draftJs-${ mediaUrlName }`, JSON.stringify(data));\r\n};\r\n\r\n// eslint-disable-next-line class-methods-use-this\r\nconst isPresentInLocalStorage = (mediaUrl, fileName) => {\r\n  if (mediaUrl !== null) {\r\n    let mediaUrlName = mediaUrl;\r\n    if (mediaUrl.includes('blob')) {\r\n      mediaUrlName = fileName;\r\n    }\r\n\r\n    const data = localStorage.getItem(`draftJs-${ mediaUrlName }`);\r\n    if (data !== null) {\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  return false;\r\n};\r\n\r\nconst loadLocalSavedData = (mediaUrl, fileName) => {\r\n  let mediaUrlName = mediaUrl;\r\n  if (mediaUrl.includes('blob')) {\r\n    mediaUrlName = fileName;\r\n  }\r\n  const data = JSON.parse(localStorage.getItem(`draftJs-${ mediaUrlName }`));\r\n  return data;\r\n};\r\n\r\nexport { loadLocalSavedData, isPresentInLocalStorage, localSave };"],"sourceRoot":""}